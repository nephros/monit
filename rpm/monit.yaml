Name: monit
Summary: Pro-active monitoring utility for unix systems
Version: 5.34.0
Release: 0
Group: Applications
License: AGPLv3+
URL: https://mmonit.com/monit/dist/%{name}-%{version}.tar.gz
SCM: https://bitbucket.org/tildeslash/monit/
Sources:
    - '%{name}-%{version}.tar.gz'
    # 'https://bitbucket.org/tildeslash/monit/downloads/Monit-Icons.zip'
    - 'monitrc'
    - 'monit-web.desktop'
Description: |
    %{summary}.

    %if "%{?vendor}" == "chum"
    Please submit your scripts and config snippets to the packaging repo so we
    can build a contrib package together.

    Title: Monit
    Type: console-application
    PackagedBy: nephros
    Categories:
     - System
     - Monitor
    Custom:
      Repo: https://bitbucket.org/tildeslash/monit/
      PackagingRepo: https://github.com/nephros/monit/
    PackageIcon: https://github.com/nephros/monit/raw/master/icons/Logo/Monit-Logo-512x512%401x.png
    Links:
      Homepage: %{url}
      Help: https://mmonit.com/wiki/Monit
    %endif

SetupOptions: -q -n %{name}-%{version}/monit
RpmLintIgnore:
  - 'summary-too-long'
  - 'no-changelogname-tag'
  - 'invalid-url'
#Patches:
#
Macros:
  - |
    spectacle_bug; hack_fix
    %if 0%{?sailfishos_version} > 40300
    BuildRequires:  pkgconfig(libcrypt)
    %endif
#Requires:
PkgBR:
    - pam-devel
    - systemd
    - automake
    - autoconf
    - libtool
    - bison
    - flex
PkgConfigBR:
    - zlib
    - libssl
    # libcrypt
#Configure: none
ConfigOptions:
  - '--enable-optimized'
  - '--with-zlib'
#Builder: make
NoIconCache: true
Files:
  - '%license COPYING'
  - '%{_bindir}/*'
  - '%{_unitdir}/%{name}.service'
  - '%{_datadir}/applications/%{name}-web.desktop'
  - '%{_datadir}/icons/hicolor/*/*/*.png'
  - '%config %{_sysconfdir}/bash_completion.d/%{name}'
  - '%config(noreplace) %{_sysconfdir}/monitrc'
  - '%dir %{_sysconfdir}/%{name}.d'
