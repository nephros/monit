Name: harbour-monit
Summary: Sailfish OS GUI for monit
Version: 0.9.1
Release: 0
Group: Applications
License: ASL 2.0
URL: https://github.com:sailfishos-chum/monit
SCM: https://github.com:sailfishos-chum/monit
Sources:
    - '%{name}-%{version}.tar.gz'
Description: |
        Monit. Barking at daemons.

        Monit is a small Open Source utility for managing and monitoring Unix
        systems. Monit conducts automatic maintenance and repair and can execute
        meaningful causal actions in error situations.

        This is a simple Sailfish OS GUI application to view the status of the daemon.

        %if "%{?vendor}" == "chum"
        Title: Monit GUI
        Type: desktop-application
        PackagedBy: nephros
        Categories:
         - System
         - Monitor
        Custom:
          PackagingRepo: https://github.com/nephros/monit
          Repo: https://github.com/sailfishos-chum/monit
        PackageIcon: https://mmonit.com/monit/img/logo.png
        #        Screenshots:
        #           - https://mmonit.com/monit/img/screenshots/1.png
        #           - https://mmonit.com/monit/img/screenshots/9.png
        #           - https://mmonit.com/monit/img/screenshots/10.png
        #           - https://mmonit.com/monit/img/screenshots/2.png
        #           - https://mmonit.com/monit/img/screenshots/4.png
        #           - https://mmonit.com/monit/img/screenshots/5.png
        Links:
          Homepage: https://www.mmonit.com/monit/slides
        %endif

SetupOptions: -q -n %{name}-%{version}
RpmLintIgnore:
  - 'summary-too-long'
  - 'no-changelogname-tag'
  - 'invalid-url'
#Patches:
#
Macros:
  - |
    spectacle_bug; hack_fix
    %if 0%{?sailfishos_version} > 40300
    BuildRequires:  pkgconfig(libcrypt)
    %endif
Requires:
  - monit >= 5.24
  - libsailfishapp-launcher
PkgBR:
  - qt5-qttools-linguist
  - qt5-qmake
  - sailfish-svg2png
  - qml-rpm-macros
Configure: none
Builder: qmake5
NoIconCache: true
BuildArch: noarch
Files:
  - '%license LICENSE'
  - '%dir %{_datadir}/%{name}'
  - '%{_datadir}/%{name}/translations/*.qm'
  - '%{_datadir}/%{name}/qml/*'
  - '%{_datadir}/applications/%{name}.desktop'
  - '%{_datadir}/icons/*/*/apps/%{name}.png'
  - '%{_datadir}/icons/*/*/apps/%{name}.svg'
